# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 404 –æ—Ç YooKassa

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–í –ª–æ–≥–∞—Ö –ø–æ—è–≤–ª—è–ª–∏—Å—å –æ—à–∏–±–∫–∏:
```
‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞: 404 - {
  "code": "not_found",
  "description": "Incorrect payment_id. Payment doesn't exist or access denied."
}
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å –ø–ª–∞—Ç–µ–∂–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`
- –≠—Ç–∏ –ø–ª–∞—Ç–µ–∂–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ YooKassa (—É–¥–∞–ª–µ–Ω—ã, —Ç–µ—Å—Ç–æ–≤—ã–µ, –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ID)
- –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å—Ç–∞—Ç—É—Å–∞ YooKassa –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404
- –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–ª–∞—Å—å, –Ω–æ –ø–ª–∞—Ç–µ–∂ –æ—Å—Ç–∞–≤–∞–ª—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ `pending`

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 404:

1. **–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ 404 –æ—Ç YooKassa:**
   - –ü–ª–∞—Ç–µ–∂ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `canceled` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã: `not_found`
   - –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä: `yookassa`

2. **–£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –í–º–µ—Å—Ç–æ ERROR —Ç–µ–ø–µ—Ä—å WARNING –¥–ª—è 404
   - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –ø–ª–∞—Ç–µ–∂ –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ canceled

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –§—É–Ω–∫—Ü–∏—è `check_yookassa_payment_status`:

**–ë—ã–ª–æ:**
```python
if response.status_code == 200:
    return payment_info
else:
    logger.error(f"–û—à–∏–±–∫–∞: {response.status_code}")
    return None
```

**–°—Ç–∞–ª–æ:**
```python
if response.status_code == 200:
    return payment_info
elif response.status_code == 404:
    # –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ canceled
    update_payment_status(yookassa_payment_id, 'canceled', {...})
    return None
else:
    logger.error(f"–û—à–∏–±–∫–∞: {response.status_code}")
    return None
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –û—à–∏–±–∫–∏ 404 –±–æ–ª—å—à–µ –Ω–µ –∑–∞—Å–æ—Ä—è—é—Ç –ª–æ–≥–∏
- ‚úÖ –ü–ª–∞—Ç–µ–∂–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ YooKassa, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ canceled
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Å—Ç–∞–µ—Ç—Å—è —á–∏—Å—Ç–æ–π
- ‚úÖ –ù–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—Å–µ –µ—â–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞!**

–ï—Å–ª–∏ –æ—à–∏–±–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è:
1. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (git pull)
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
3. –°—Ç–∞—Ä—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ canceled

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

