# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –±–æ—Ç–∞ –Ω–∞ Timeweb VPS üöÄ

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é Astral Bot –Ω–∞ VPS –æ—Ç Timeweb.

## üìã –ß—Ç–æ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

1. –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ Timeweb (https://timeweb.com)
2. VPS —Å–µ—Ä–≤–µ—Ä (–º–∏–Ω–∏–º—É–º 1 GB RAM, 1 —è–¥—Ä–æ CPU, 5 GB –¥–∏—Å–∫–∞)
3. –î–æ—Å—Ç—É–ø –∫ SSH
4. –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather

## üéØ –®–∞–≥ 1: –ê—Ä–µ–Ω–¥–∞ VPS –Ω–∞ Timeweb

### 1.1 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://timeweb.com
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–û–±–ª–∞—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã"** ‚Üí **"–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã"**

### 1.2 –°–æ–∑–¥–∞–Ω–∏–µ VPS

1. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä"**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ:
   - **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π**: 1 GB RAM, 1 —è–¥—Ä–æ CPU, 10 GB SSD (–æ—Ç 199‚ÇΩ/–º–µ—Å)
   - **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π**: 2 GB RAM, 2 —è–¥—Ä–∞ CPU, 20 GB SSD (–æ—Ç 399‚ÇΩ/–º–µ—Å)
3. –í—ã–±–µ—Ä–∏—Ç–µ **–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É**: **Ubuntu 22.04 LTS** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω (–ú–æ—Å–∫–≤–∞ –∏–ª–∏ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥)
5. –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –∏ –æ–ø–ª–∞—Ç–∏—Ç–µ –ø–µ—Ä–≤—ã–π –º–µ—Å—è—Ü
6. –î–æ–∂–¥–∏—Ç–µ—Å—å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞ (–æ–±—ã—á–Ω–æ 2-5 –º–∏–Ω—É—Ç)

### 1.3 –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞:

1. –í –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Timeweb –Ω–∞–π–¥–∏—Ç–µ –≤–∞—à VPS
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `185.71.76.XXX`)
   - **–ü–∞—Ä–æ–ª—å root** (–±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –æ–¥–∏–Ω —Ä–∞–∑, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ!)
   - –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ SSH-–∫–ª—é—á –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

## üîê –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª (Linux/Mac)

```bash
ssh root@–≤–∞—à_ip_–∞–¥—Ä–µ—Å
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –≤–≤–µ–¥–∏—Ç–µ `yes` –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –∑–∞—Ç–µ–º –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å root.

### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ SSH-–∫–ª–∏–µ–Ω—Ç (Windows)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **PuTTY** (https://www.putty.org) –∏–ª–∏ **MobaXterm**:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ PuTTY
2. –í –ø–æ–ª–µ **Host Name** –≤–≤–µ–¥–∏—Ç–µ IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
3. –ü–æ—Ä—Ç: **22**
4. –¢–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: **SSH**
5. –ù–∞–∂–º–∏—Ç–µ **Open**
6. –í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω: `root`
7. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å (–ø—Ä–∏ –≤–≤–æ–¥–µ –ø–∞—Ä–æ–ª—å –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)

## üöÄ –®–∞–≥ 3: –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### 3.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
apt update && apt upgrade -y
```

### 3.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤

```bash
apt install -y python3.9 python3.9-venv python3-pip git build-essential python3-dev swig curl wget nano htop ufw
```

### 3.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

```bash
# –†–∞–∑—Ä–µ—à–∞–µ–º SSH (–í–ê–ñ–ù–û! –°–¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ –ø–µ—Ä–≤—ã–º)
ufw allow 22/tcp

# –†–∞–∑—Ä–µ—à–∞–µ–º HTTP –∏ HTTPS (–¥–ª—è webhook, –µ—Å–ª–∏ –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω)
ufw allow 80/tcp
ufw allow 443/tcp

# –í–∫–ª—é—á–∞–µ–º firewall
ufw enable

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
ufw status
```

## üë§ –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –±–æ—Ç–∞

–î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ª—É—á—à–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞ –Ω–µ –æ—Ç root:

```bash
# –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
adduser --disabled-password --gecos "" astralbot

# –î–æ–±–∞–≤–ª—è–µ–º –≤ –≥—Ä—É–ø–ø—É sudo (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)
usermod -aG sudo astralbot

# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
su - astralbot
```

## üì¶ –®–∞–≥ 5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞

### 5.1 –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
cd ~
git clone https://github.com/NikRoshchin1894/astral-bot.git Astral_Bot
cd Astral_Bot
```

### 5.2 –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python3 -m venv venv
source venv/bin/activate
```

### 5.3 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install --upgrade pip
pip install -r requirements.txt
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –æ—à–∏–±–∫–∏ —Å `pyswisseph`, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ root –≤—Ä–µ–º–µ–Ω–Ω–æ
exit

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
apt install -y swig libswisseph-dev

# –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –±–æ—Ç–∞
su - astralbot
cd ~/Astral_Bot
source venv/bin/activate
pip install pyswisseph
```

## ‚öôÔ∏è –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cd ~/Astral_Bot
cp env.example .env
nano .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# OpenAI API –∫–ª—é—á (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞—Ç–∞–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç)
OPENAI_API_KEY=sk-...

# –ÆKassa –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
YOOKASSA_SHOP_ID=–≤–∞—à_shop_id
YOOKASSA_SECRET_KEY=–≤–∞—à_secret_key

# Username –±–æ—Ç–∞ (–±–µ–∑ @)
TELEGRAM_BOT_USERNAME=–≤–∞—à_bot_username

# URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à username)
PAYMENT_SUCCESS_URL=https://t.me/–≤–∞—à_bot_username?start=payment_success
PAYMENT_RETURN_URL=https://t.me/–≤–∞—à_bot_username?start=payment_cancel

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è SQLite –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ PostgreSQL)
# DATABASE_PUBLIC_URL=postgresql://user:password@localhost:5432/database
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª**: `Ctrl+O` (Enter) ‚Üí `Ctrl+X`

## üóÑÔ∏è –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –í–∞—Ä–∏–∞–Ω—Ç A: SQLite (–ø—Ä–æ—â–µ, –¥–ª—è –Ω–∞—á–∞–ª–∞)

–ù–∏—á–µ–≥–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ! SQLite –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ `DATABASE_PUBLIC_URL` –Ω–µ —É–∫–∞–∑–∞–Ω.

### –í–∞—Ä–∏–∞–Ω—Ç B: PostgreSQL (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

```bash
# –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ root
exit

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL
apt install -y postgresql postgresql-contrib

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ PostgreSQL
sudo -u postgres psql
```

–í –∫–æ–Ω—Å–æ–ª–∏ PostgreSQL –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
CREATE USER astralbot WITH PASSWORD '–≤–∞—à_–Ω–∞–¥–µ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å';
CREATE DATABASE astral_bot OWNER astralbot;
GRANT ALL PRIVILEGES ON DATABASE astral_bot TO astralbot;
\q
```

–û–±–Ω–æ–≤–∏—Ç–µ `.env` —Ñ–∞–π–ª:

```bash
su - astralbot
cd ~/Astral_Bot
nano .env
```

–î–æ–±–∞–≤—å—Ç–µ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:

```env
DATABASE_PUBLIC_URL=postgresql://astralbot:–≤–∞—à_–Ω–∞–¥–µ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å@localhost:5432/astral_bot
```

## üìÇ –®–∞–≥ 8: –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤

```bash
mkdir -p ~/Astral_Bot/logs
chmod 755 ~/Astral_Bot/logs
```

## üîß –®–∞–≥ 9: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫)

```bash
# –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ root
exit

# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞
nano /etc/systemd/system/astral-bot.service
```

–í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–∑–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è):

```ini
[Unit]
Description=Astral Bot Telegram Service
After=network.target postgresql.service

[Service]
Type=simple
User=astralbot
WorkingDirectory=/home/astralbot/Astral_Bot
Environment="PATH=/home/astralbot/Astral_Bot/venv/bin"
ExecStart=/home/astralbot/Astral_Bot/venv/bin/python3 /home/astralbot/Astral_Bot/bot.py
Restart=always
RestartSec=10
StandardOutput=append:/home/astralbot/Astral_Bot/logs/bot.log
StandardError=append:/home/astralbot/Astral_Bot/logs/bot_error.log

[Install]
WantedBy=multi-user.target
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ**: `Ctrl+O` (Enter) ‚Üí `Ctrl+X`

```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º systemd
systemctl daemon-reload

# –í–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl enable astral-bot

# –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
systemctl start astral-bot

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
systemctl status astral-bot
```

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ **"active (running)"** –≤ –∑–µ–ª–µ–Ω–æ–º —Ü–≤–µ—Ç–µ.

## ‚úÖ –®–∞–≥ 10: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u astral-bot -f

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
journalctl -u astral-bot -n 50

# –ò–ª–∏ –∏–∑ —Ñ–∞–π–ª–∞
tail -f /home/astralbot/Astral_Bot/logs/bot.log
```

### –¢–µ—Å—Ç –±–æ—Ç–∞

1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
3. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

## üåê –®–∞–≥ 11: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è webhook)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –ÆKassa:

### 11.1 –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞ –≤ Timeweb

1. –í –ø–∞–Ω–µ–ª–∏ Timeweb –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–î–æ–º–µ–Ω—ã"**
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS-–∑–∞–ø–∏—Å–∏:
   - **–¢–∏–ø**: A
   - **–ò–º—è**: @ (–∏–ª–∏ –ø–æ–¥–¥–æ–º–µ–Ω, –Ω–∞–ø—Ä–∏–º–µ—Ä `bot`)
   - **–ó–Ω–∞—á–µ–Ω–∏–µ**: IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ VPS

### 11.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx

```bash
apt install -y nginx certbot python3-certbot-nginx
```

### 11.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

```bash
nano /etc/nginx/sites-available/astral-bot
```

–î–æ–±–∞–≤—å—Ç–µ:

```nginx
server {
    listen 80;
    server_name –≤–∞—à_–¥–æ–º–µ–Ω.ru;

    # Webhook –¥–ª—è –ÆKassa
    location /webhook/yookassa {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 300s;
        proxy_connect_timeout 75s;
    }
}
```

```bash
# –í–∫–ª—é—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
ln -s /etc/nginx/sites-available/astral-bot /etc/nginx/sites-enabled/
rm /etc/nginx/sites-enabled/default  # –£–¥–∞–ª–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nginx -t  # –ü—Ä–æ–≤–µ—Ä–∫–∞
systemctl restart nginx
```

### 11.4 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (Let's Encrypt)

```bash
certbot --nginx -d –≤–∞—à_–¥–æ–º–µ–Ω.ru
```

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º. –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### 11.5 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env

```bash
su - astralbot
cd ~/Astral_Bot
nano .env
```

–î–æ–±–∞–≤—å—Ç–µ:

```env
YOOKASSA_WEBHOOK_URL=https://–≤–∞—à_–¥–æ–º–µ–Ω.ru/webhook/yookassa
WEBHOOK_PORT=8080
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

```bash
systemctl restart astral-bot
```

### 11.6 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –ÆKassa

1. –ó–∞–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ÆKassa: https://yookassa.ru/my
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
3. –î–æ–±–∞–≤—å—Ç–µ URL: `https://–≤–∞—à_–¥–æ–º–µ–Ω.ru/webhook/yookassa`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

## üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ó–∞–ø—É—Å–∫
systemctl start astral-bot

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
systemctl stop astral-bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart astral-bot

# –°—Ç–∞—Ç—É—Å
systemctl status astral-bot

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
journalctl -u astral-bot -f
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–æ—Ç–∞
su - astralbot
cd ~/Astral_Bot

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞ (–∏–∑ –¥—Ä—É–≥–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏–ª–∏ SSH —Å–µ—Å—Å–∏–∏)
# systemctl stop astral-bot

# –ü–æ–ª—É—á–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
git pull

# –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
source venv/bin/activate
pip install -r requirements.txt

# –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ root –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
exit
systemctl restart astral-bot
```

## üõ°Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```bash
apt install -y unattended-upgrades
dpkg-reconfigure -plow unattended-upgrades
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Fail2ban (–∑–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞)

```bash
apt install -y fail2ban
systemctl enable fail2ban
systemctl start fail2ban
```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—Ö–æ–¥–∞ –ø–æ –ø–∞—Ä–æ–ª—é (—Ç–æ–ª—å–∫–æ SSH-–∫–ª—é—á)

1. –°–æ–∑–¥–∞–π—Ç–µ SSH-–∫–ª—é—á –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. –í —Ñ–∞–π–ª–µ `/etc/ssh/sshd_config` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
   ```
   PasswordAuthentication no
   PubkeyAuthentication yes
   ```
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ SSH: `systemctl restart sshd`

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# CPU –∏ –ø–∞–º—è—Ç—å
htop

# –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
df -h

# –ü–∞–º—è—Ç—å
free -h

# –°–µ—Ç–µ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
iftop  # (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: apt install -y iftop)
```

### –õ–æ–≥–∏

```bash
# –í—Å–µ –ª–æ–≥–∏ –±–æ—Ç–∞
journalctl -u astral-bot

# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
journalctl -u astral-bot --since "1 hour ago"

# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u astral-bot -f
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```bash
   journalctl -u astral-bot -n 100
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   su - astralbot
   cd ~/Astral_Bot
   source venv/bin/activate
   python3 -c "from dotenv import load_dotenv; import os; load_dotenv(); print('Token:', bool(os.getenv('TELEGRAM_BOT_TOKEN')))"
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
   ```bash
   ls -la /home/astralbot/Astral_Bot/
   ```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

**SQLite**:
```bash
ls -la /home/astralbot/Astral_Bot/users.db
chmod 644 /home/astralbot/Astral_Bot/users.db
```

**PostgreSQL**:
```bash
sudo -u postgres psql -d astral_bot -c "SELECT 1;"
```

### –û—à–∏–±–∫–∏ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

```bash
su - astralbot
cd ~/Astral_Bot
source venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt --force-reinstall
```

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω: `systemctl status astral-bot`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏: `journalctl -u astral-bot -n 50`

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ Timeweb:

- **VPS**: –æ—Ç 199‚ÇΩ/–º–µ—Å (1 GB RAM, 10 GB SSD)
- **–î–æ–º–µ–Ω**: –æ—Ç 149‚ÇΩ/–≥–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–ò—Ç–æ–≥–æ**: –æ—Ç 199‚ÇΩ/–º–µ—Å –±–µ–∑ –¥–æ–º–µ–Ω–∞

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **Timeweb**: https://timeweb.com/ru/help (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–æ—Ç–∞**: —Å–º. README.md –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- **–ü—Ä–æ–±–ª–µ–º—ã —Å –±–æ—Ç–æ–º**: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ (`journalctl -u astral-bot`)

---

**–ì–æ—Ç–æ–≤–æ!** –í–∞—à –±–æ—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ Timeweb VPS! üéâ

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

