# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏

## –ü—Ä–æ–±–ª–µ–º–∞
–ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–û–ø–ª–∞—Ç–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞" –¥–∞–∂–µ –∫–æ–≥–¥–∞ –ø–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–µ–Ω –∏ —Å—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å–∞–Ω –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ 'succeeded'.

## –ü–æ –ª–æ–≥–∞–º –≤–∏–¥–Ω–æ:
1. ‚úÖ Webhook –æ—Ç YooKassa –ø–æ–ª—É—á–µ–Ω: `payment.succeeded` –¥–ª—è –ø–ª–∞—Ç–µ–∂–∞ `30c55e64-000f-5000-b000-1072b037d9b9`
2. ‚úÖ –°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ –æ–±–Ω–æ–≤–ª–µ–Ω –≤ –±–∞–∑–µ: `status=succeeded, user_id=724281972`
3. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –æ–ø–ª–∞—Ç–∏–≤—à–∏–π
4. ‚úÖ –ü–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω —á–µ—Ä–µ–∑ webhook

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º:

1. **–°—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ë–î?** 
   - –î–ê, –≤–∏–¥–Ω–æ –≤ –ª–æ–≥–∞—Ö: `üíæ –°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ –æ–±–Ω–æ–≤–ª–µ–Ω: payment_id=..., status=succeeded`

2. **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `/start payment_cancel`
   - –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–ª–∞—Ç–µ–∂–∞
   - –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å 'succeeded', –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞—Ç–µ–∂ –∏ –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—Ç–º–µ–Ω—É

3. **–ü–æ—á–µ–º—É –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è "–û–ø–ª–∞—Ç–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞"?**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –î–û —Ç–æ–≥–æ, –∫–∞–∫ webhook –æ–±—Ä–∞–±–æ—Ç–∞–ª—Å—è (race condition)
   - –ü—Ä–æ–±–ª–µ–º–∞ —Å —á—Ç–µ–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞ –∏–∑ –ë–î
   - –ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø–ª–∞—Ç–µ–∂–∞

## –†–µ—à–µ–Ω–∏–µ:
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤ –Ω–∞—á–∞–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ `payment_cancel`:
- –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å —É–∂–µ 'succeeded', —Å—Ä–∞–∑—É –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–ª–∞—Ç–µ–∂
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ –ø–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–µ–Ω, –Ω–æ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
1. –û–±–Ω–æ–≤–ª–µ–Ω –ª–∏ –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ? (`git pull`)
2. –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ª–∏ –±–æ—Ç –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è?
3. –ö–∞–∫–∏–µ –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?

