# –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook –¥–ª—è Timeweb Cloud üöÄ

## –ö–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç: –ø—Ä–æ–∫—Å–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –Ω—É–∂–µ–Ω!

–ï—Å–ª–∏ –¥–æ–º–µ–Ω —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 502, –∞ –Ω–µ 404), –∑–Ω–∞—á–∏—Ç **–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞** –≤ Timeweb Cloud!

**502 Bad Gateway** –æ–∑–Ω–∞—á–∞–µ—Ç:
- ‚úÖ –î–æ–º–µ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –¥–æ—Ö–æ–¥—è—Ç –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚ùå –ù–æ Flask —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í –ø–∞–Ω–µ–ª–∏ Timeweb Cloud –¥–æ–±–∞–≤—å—Ç–µ:

**Key:** `TELEGRAM_WEBHOOK_URL`  
**Value:** `https://nikroshchin1894-astral-bot-e77d.twc1.net/webhook/telegram`

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
üåê –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ WEBHOOK
üåê –ó–∞–ø—É—Å–∫ webhook —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ 0.0.0.0:8080
‚úÖ Webhook —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
‚úÖ Webhook —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Telegram
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

```bash
python diagnose_webhook.py
```

–ï—Å–ª–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç–µ **200 OK** –≤–º–µ—Å—Ç–æ **502** - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! ‚úÖ

---

## –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ 502

–¢–æ–≥–¥–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–µ–Ω –ø—Ä–æ–∫—Å–∏. –í –ø–∞–Ω–µ–ª–∏ Timeweb Cloud:

1. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–î–æ–º–µ–Ω—ã"** –∏–ª–∏ **"–ü—Ä–æ–∫—Å–∏"**
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é:
   - `/webhook/telegram` ‚Üí `localhost:8080`
   - `/webhook/yookassa` ‚Üí `localhost:8080`

---

## –ò—Ç–æ–≥

**–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ø—Ä–æ–∫—Å–∏ –ù–ï –Ω—É–∂–µ–Ω** - –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `TELEGRAM_WEBHOOK_URL`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
3. –ë–æ—Ç —Å–∞–º –∑–∞–ø—É—Å—Ç–∏—Ç webhook —Å–µ—Ä–≤–µ—Ä

**–ü—Ä–æ–∫—Å–∏ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:**
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ 502
- –í –ø–∞–Ω–µ–ª–∏ Timeweb Cloud –µ—Å—Ç—å —Ä–∞–∑–¥–µ–ª –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∫—Å–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Timeweb Cloud —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

