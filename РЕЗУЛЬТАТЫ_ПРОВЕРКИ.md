# üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: $(date +"%Y-%m-%d %H:%M:%S")

## ‚úÖ –ß–¢–û –£–ñ–ï –ù–ê–°–¢–†–û–ï–ù–û –ü–†–ê–í–ò–õ–¨–ù–û

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚úÖ

- ‚úÖ **TELEGRAM_BOT_TOKEN** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  - –ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω: @Astralogy_bot
  - ID: 8230309850
  
- ‚úÖ **TELEGRAM_WEBHOOK_URL** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  - URL: `https://nikroshchin1894-astral-bot-e77d.twc1.net/webhook/telegram`
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç HTTPS ‚úÖ
  - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å `/webhook/telegram` ‚úÖ

- ‚úÖ **YOOKASSA_WEBHOOK_URL** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  - URL: `https://nikroshchin1894-astral-bot-e77d.twc1.net/webhook/yookassa`
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç HTTPS ‚úÖ
  - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å `/webhook/yookassa` ‚úÖ

- ‚úÖ **YOOKASSA_SHOP_ID** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ **YOOKASSA_SECRET_KEY** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ **OPENAI_API_KEY** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã)
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ (PostgreSQL)

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚úÖ

- ‚úÖ –ü–æ—Ä—Ç webhook: 8080
- ‚úÖ –í—Å–µ URLs –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram

---

## ‚ùå –ß–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢

### 1. Webhook –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Telegram ‚ö†Ô∏è

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è polling (getUpdates)

**–ü—Ä–æ–±–ª–µ–º–∞:** Webhook URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `.env`, –Ω–æ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Telegram API

**–†–µ—à–µ–Ω–∏–µ:** –ù—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ - –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç webhook

### 2. Webhook —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (502 Bad Gateway) ‚ùå

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ—Ä–≤–µ—Ä webhook –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- Webhook —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
- –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–æ–∫—Å–∏/–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π
- –ü–æ—Ä—Ç 8080 –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## üöÄ –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –°–ï–ô–ß–ê–°

### –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ: –ó–ê–ü–£–°–¢–ò–¢–¨ –ë–û–¢–ê –ù–ê –°–ï–†–í–ï–†–ï

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ Timeweb Cloud:
sudo systemctl start astral-bot
# –∏–ª–∏
cd /path/to/Astral_Bot && python bot.py
```

### –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç webhook —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 8080
2. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç webhook –≤ Telegram
3. ‚úÖ –ù–∞—á–Ω–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ webhook (–Ω–µ polling)

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ü–†–û–í–ï–†–ö–ò

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚úÖ
- [x] TELEGRAM_BOT_TOKEN —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [x] TELEGRAM_WEBHOOK_URL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- [x] YOOKASSA_WEBHOOK_URL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- [x] YOOKASSA_SHOP_ID —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [x] YOOKASSA_SECRET_KEY —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [x] OPENAI_API_KEY —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [x] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞

### –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞ ‚ö†Ô∏è
- [ ] –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] Webhook —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (–ø–æ—Ä—Ç 8080)
- [ ] Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Telegram
- [ ] –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ WEBHOOK (–Ω–µ polling)

---

## üîç –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò

### –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞
python check_bot_status.py

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# ‚úÖ Webhook –£–°–¢–ê–ù–û–í–õ–ï–ù
# URL: https://nikroshchin1894-astral-bot-e77d.twc1.net/webhook/telegram

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ webhook
python check_all_webhooks.py

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# ‚úÖ Telegram webhook: –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –æ–ø–ª–∞—Ç—ã
python check_payment_readiness.py

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# ‚úÖ –í–°–ï –ü–†–û–í–ï–†–ö–ò –ü–†–û–ô–î–ï–ù–´
```

---

## üìù –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

### ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (9/10 –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–æ–π–¥–µ–Ω–æ)

- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úÖ
- –í—Å–µ URLs –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úÖ
- –ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω –≤ Telegram ‚úÖ

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ (1/10)

- ‚ùå **–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** - —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å!

---

## üí° –í–ê–ñ–ù–û

**–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** 

–í–∞–º –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç webhook
3. –ë–æ—Ç –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ WEBHOOK (–Ω–µ polling)

**–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –≤—Å–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!** üöÄ

